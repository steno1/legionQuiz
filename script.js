

const sectionedQuestions = [
    // Session 1 
    [
        {
            question: "Who founded the Legion of Mary?",
            options: ["Servant of God Frank Duff", "Blessed John Henry Newman", "St. Augustine", "St. Thomas Aquinas"],
            correctAnswer: "Servant of God Frank Duff"
        },
        {
            question: "What is the name of the first and fundamental book of the Legion of Mary?",
            options: ["The Handbook", "The Rule of the Legion", "The Legionary's Guide", "The Spiritual Works of Mercy"],
            correctAnswer: "The Handbook"
        },
        {
            question: "What year was the Legion of Mary founded?",
            options: ["1921", "1905", "1925", "1940"],
            correctAnswer: "1921"
        },
        {
            question: "What is the principal objective of the Legion of Mary?",
            options: ["World peace", "The sanctification of its members", "Helping the poor", "Teaching catechism"],
            correctAnswer: "The sanctification of its members"
        },
        {
            question: "What does the motto of the Legion of Mary, 'Ad Jesum per Mariam,' mean?",
            options: ["To Jesus through Mary", "To Mary through Jesus", "To heaven with Mary", "To Mary with love"],
            correctAnswer: "To Jesus through Mary"
        },
        {
            question: "What is the role of the spiritual director in the Legion of Mary?",
            options: ["Leading meetings", "Guiding spiritual formation", "Organizing events", "Managing finances"],
            correctAnswer: "Guiding spiritual formation"
        },
        {
            question: "Which of the following is a requirement for a member of the Legion of Mary?",
            options: ["Daily prayers", "Attendance at weekly meetings", "Charitable works", "All of the above"],
            correctAnswer: "All of the above"
        },
        {
            question: "How often do Legion members meet for meetings?",
            options: ["Once a week", "Every day", "Twice a month", "Every month"],
            correctAnswer: "Once a week"
        },
        {
            question: "Which of these prayers is central to the Legion of Mary?",
            options: ["The Our Father", "The Hail Mary", "The Magnificat", "The Rosary"],
            correctAnswer: "The Rosary"
        },
        {
            question: "What is the name of the official publication of the Legion of Mary?",
            options: ["The Legionary", "The Catholic Messenger", "The Voice of Mary", "Legion of Mary Bulletin"],
            correctAnswer: "The Legionary"
        }
    ],

    // Session 2 
    [
        {
            question: "Who is the patron saint of the Legion of Mary?",
            options: ["St. Mary", "St. Peter", "St. Joseph", "St. Michael the Archangel"],
            correctAnswer: "St. Mary"
        },
        {
            question: "What is the Legion's main focus for apostolic work?",
            options: ["Evangelization", "Education", "Healthcare", "Political advocacy"],
            correctAnswer: "Evangelization"
        },
        {
            question: "The Legion of Mary is known for its devotion to which sacrament?",
            options: ["Baptism", "Eucharist", "Reconciliation", "Confirmation"],
            correctAnswer: "Eucharist"
        },
        {
            question: "Who was the first spiritual director of the Legion of Mary?",
            options: ["Fr. Patrick Peyton", "Fr. Eugene McCabe", "Fr. Vincent McNabb", "Fr. Gerald Fitzgerald"],
            correctAnswer: "Fr. Eugene McCabe"
        },
        {
            question: "Which Vatican II document influenced the growth of the Legion of Mary?",
            options: ["Lumen Gentium", "Gaudium et Spes", "Apostolicam Actuositatem", "Dei Verbum"],
            correctAnswer: "Apostolicam Actuositatem"
        },
        {
            question: "The Legion of Mary is open to people of what age group?",
            options: ["Only adults", "Children and adults", "Only seniors", "Teenagers only"],
            correctAnswer: "Children and adults"
        },
        {
            question: "What is the Legion of Mary's guiding virtue?",
            options: ["Humility", "Charity", "Patience", "Obedience"],
            correctAnswer: "Humility"
        },
        {
            question: "Which of these is a characteristic of Legion of Mary members?",
            options: ["Active apostolic work", "Leadership roles", "Studying theology", "Running charitable organizations"],
            correctAnswer: "Active apostolic work"
        },
        {
            question: "What is the Legion of Mary's principal aim in the world today?",
            options: ["Evangelizing through works", "Bringing political change", "Building churches", "Leading social movements"],
            correctAnswer: "Evangelizing through works"
        },
        {
            question: "Which is the principal source of strength for the Legion of Mary?",
            options: ["The Eucharist", "The Holy Spirit", "The Rosary", "Devotion to Mary"],
            correctAnswer: "The Holy Spirit"
        }
    ],

    // Session 3 
    [
        {
            question: "What is the purpose of the Legion of Mary auxiliary member?",
            options: ["To be actively involved in apostolic works", "To provide financial support", "To pray for the work of the Legion", "To lead prayer meetings"],
            correctAnswer: "To pray for the work of the Legion"
        },
        {
            question: "What is a characteristic of the work done by the Legion of Mary?",
            options: ["Educational outreach", "Social services", "Evangelization", "Healthcare missions"],
            correctAnswer: "Evangelization"
        },
        {
            question: "Which prayer is considered the official prayer of the Legion of Mary?",
            options: ["The Hail Mary", "The Magnificat", "The Rosary", "The Our Father"],
            correctAnswer: "The Magnificat"
        },
        {
            question: "What does a Legionary need to be committed to?",
            options: ["Prayer", "Apostolic works", "Personal spiritual growth", "All of the above"],
            correctAnswer: "All of the above"
        },
        {
            question: "What is one key responsibility of the president of a Legion group?",
            options: ["Leading meetings", "Handling finances", "Training members", "Managing external relations"],
            correctAnswer: "Leading meetings"
        },
        {
            question: "What is the second most important book after The Handbook in the Legion of Mary?",
            options: ["The Manual", "The Spiritual Diary", "The Rule", "The Book of Mary"],
            correctAnswer: "The Rule"
        },
        {
            question: "The Legion of Mary promotes the veneration of which figure?",
            options: ["St. Joseph", "The Blessed Virgin Mary", "St. Peter", "St. Thomas Aquinas"],
            correctAnswer: "The Blessed Virgin Mary"
        },
        {
            question: "Which Marian devotion is central to the Legion of Mary?",
            options: ["The Rosary", "The Divine Mercy Chaplet", "The Litany of the Saints", "The Way of the Cross"],
            correctAnswer: "The Rosary"
        },
        {
            question: "Where did Frank Duff, the founder of the Legion of Mary, live?",
            options: ["Dublin, Ireland", "Rome, Italy", "Lourdes, France", "Paris, France"],
            correctAnswer: "Dublin, Ireland"
        },
        {
            question: "Which of the following best describes the Legion's understanding of apostolic work?",
            options: ["Works of charity", "Evangelization and conversion", "Education of the youth", "Building hospitals"],
            correctAnswer: "Evangelization and conversion"
        }
    ],

    // Session 4
    [
        {
            question: "What is the essential role of a Legionary in the Church?",
            options: ["To preach in public", "To serve in active apostolate", "To lead the parish", "To build religious institutions"],
            correctAnswer: "To serve in active apostolate"
        },
        {
            question: "What does the Legion of Mary focus on for the spiritual growth of its members?",
            options: ["Regular prayer", "Study of the Bible", "Theological training", "Service to the poor"],
            correctAnswer: "Regular prayer"
        },
        {
            question: "Which of the following is an example of the Legion's apostolic work?",
            options: ["Feeding the hungry", "Teaching catechism", "Evangelizing", "All of the above"],
            correctAnswer: "All of the above"
        },
        {
            question: "Which is the most important book to study for Legionary formation?",
            options: ["The Handbook", "The Bible", "The Spiritual Diary", "The Rule"],
            correctAnswer: "The Handbook"
        },
        {
            question: "What is the role of the Curia in the Legion of Mary?",
            options: ["Directing the Legion", "Assisting with spiritual guidance", "Coordinating local Legions", "Serving as the board of directors"],
            correctAnswer: "Coordinating local Legions"
        },
        {
            question: "Who helped Frank Duff in establishing the Legion of Mary?",
            options: ["John A. O'Reilly", "Mary Aikenhead", "St. Catherine of Siena", "Fr. McCabe"],
            correctAnswer: "Fr. McCabe"
        },
        {
            question: "Which of the following is a duty of auxiliary members of the Legion of Mary?",
            options: ["To provide spiritual support", "To handle administrative work", "To engage in active apostolate", "To attend weekly meetings"],
            correctAnswer: "To provide spiritual support"
        },
        {
            question: "What does the Legion's membership promise to do in terms of personal sanctification?",
            options: ["Engage in daily prayer", "Take up religious orders", "Live a simple life", "Preach in public"],
            correctAnswer: "Engage in daily prayer"
        },
        {
            question: "What color is traditionally associated with the Legion of Mary?",
            options: ["White", "Green", "Blue", "Yellow"],
            correctAnswer: "Blue"
        },
        {
            question: "What is the most significant impact of the Legion of Mary on its members?",
            options: ["Increased charity work", "Deepened spiritual life", "Improved leadership skills", "Increased wealth"],
            correctAnswer: "Deepened spiritual life"
        }
    ],

    // Session 5 
    [
        {
            question: "Which of the following is an integral part of the Legion of Mary's spiritual formation?",
            options: ["Weekly meeting", "Daily personal prayers", "Guided theological classes", "Spiritual retreats"],
            correctAnswer: "Daily personal prayers"
        },
        {
            question: "What is the Legion of Mary’s relationship with the Vatican?",
            options: ["Independent", "Affiliated but separate", "Under Vatican authority", "Operating autonomously"],
            correctAnswer: "Affiliated but separate"
        },
        {
            question: "What does the Legion’s motto 'Ad Jesum per Mariam' emphasize?",
            options: ["Faith through action", "Love of the Holy Trinity", "Marian devotion", "Apostolic service"],
            correctAnswer: "Marian devotion"
        },
        {
            question: "Which of the following is a major focus for Legionary missions?",
            options: ["Evangelization and conversion", "Health care", "Preaching on the streets", "Building new churches"],
            correctAnswer: "Evangelization and conversion"
        },
        {
            question: "How does the Legion of Mary view its service?",
            options: ["Charitable service", "Missionary service", "Service through prayer and evangelization", "Social service"],
            correctAnswer: "Service through prayer and evangelization"
        },
        {
            question: "How often does a Legionary visit the poor or the needy?",
            options: ["Once a month", "Every week", "On specific occasions", "In their local community"],
            correctAnswer: "In their local community"
        },
        {
            question: "What are the two most important aspects of a Legionary’s work?",
            options: ["Prayers and works of mercy", "Building new churches and schools", "Healing the sick", "Political involvement"],
            correctAnswer: "Prayers and works of mercy"
        },
        {
            question: "Which of the following groups was one of the first apostolic works started by the Legion?",
            options: ["Teaching catechism", "Working with the homeless", "Visiting the sick", "Evangelizing the youth"],
            correctAnswer: "Visiting the sick"
        },
        {
            question: "What do members of the Legion of Mary offer to help guide their members?",
            options: ["Study groups", "Prayer meetings", "Special retreats", "Charity events"],
            correctAnswer: "Prayer meetings"
        },
        {
            question: "How can new members join the Legion of Mary?",
            options: ["By invitation", "By registration at the church", "By completing an application form", "By joining their local branch"],
            correctAnswer: "By joining their local branch"
        }
    ]
];
let currentSectionIndex = 0;
let currentQuestionIndex = 0;
let score = 0;

const questionText = document.getElementById("question-text");
const answersContainer = document.getElementById("answers-container");
const progressText = document.getElementById("progress-text");
const nextButton = document.getElementById("next-button");
const finalScoreText = document.getElementById("final-score");
const resultsContainer = document.getElementById("results-container");
const quizContainer = document.getElementById("quiz-container");
const nextSectionButton = document.getElementById("next-section-button");
const restartButton = document.getElementById("restart-button");

// Shuffle function to randomize questions
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Swap elements
    }
}

// Shuffle all sections before the quiz starts
sectionedQuestions.forEach(section => shuffleArray(section));

function loadQuestion() {
    const currentSection = sectionedQuestions[currentSectionIndex];
    const currentQuestion = currentSection[currentQuestionIndex];

    questionText.textContent = currentQuestion.question;
    answersContainer.innerHTML = ""; 

    currentQuestion.options.forEach(option => {
        const answerDiv = document.createElement("div");
        answerDiv.textContent = option;
        answerDiv.classList.add("answer-option");
        answerDiv.addEventListener("click", () => handleAnswer(option, answerDiv));
        answersContainer.appendChild(answerDiv);
    });

    progressText.textContent = `Question ${currentQuestionIndex + 1} of ${currentSection.length}`;
}

function handleAnswer(selectedAnswer, answerDiv) {
    const currentSection = sectionedQuestions[currentSectionIndex];
    const currentQuestion = currentSection[currentQuestionIndex];

    const allOptions = document.querySelectorAll(".answer-option");
    allOptions.forEach(option => option.classList.add("disabled"));

    if (selectedAnswer === currentQuestion.correctAnswer) {
        score++;
        answerDiv.classList.add("correct");
    } else {
        answerDiv.classList.add("incorrect");
        const correctOption = Array.from(allOptions).find(option => option.textContent === currentQuestion.correctAnswer);
        correctOption.classList.add("correct");
    }

    nextButton.disabled = false;
}

function showSectionResults() {
    const currentSection = sectionedQuestions[currentSectionIndex];
    const totalQuestionsInSection = currentSection.length;
    
    quizContainer.classList.add("hidden");
    resultsContainer.classList.remove("hidden");
    finalScoreText.textContent = `Your score for section ${currentSectionIndex + 1} is: ${score} / ${totalQuestionsInSection}`;
}

function showResults() {
    const totalQuestions = sectionedQuestions.reduce((sum, section) => sum + section.length, 0);
    finalScoreText.textContent = `Your final score is: ${score} / ${totalQuestions}`;
    nextButton.classList.add("hidden");  
    nextSectionButton.classList.add("hidden");  
}

nextButton.addEventListener("click", () => {
    currentQuestionIndex++;

    const currentSection = sectionedQuestions[currentSectionIndex];
    if (currentQuestionIndex < currentSection.length) {
        loadQuestion();
        nextButton.disabled = true;
    } else {
        showSectionResults();
    }
});

nextSectionButton.addEventListener("click", () => {
    if (currentSectionIndex < sectionedQuestions.length - 1) {
        currentSectionIndex++;
        currentQuestionIndex = 0;  
        score = 0;  
        quizContainer.classList.remove("hidden");
        resultsContainer.classList.add("hidden");
        loadQuestion();
        nextButton.disabled = true;  
    } else {
        showResults(); 
    }
});

restartButton.addEventListener("click", () => {
    currentSectionIndex = 0;
    currentQuestionIndex = 0;
    score = 0;
    quizContainer.classList.remove("hidden");
    resultsContainer.classList.add("hidden");
    loadQuestion();
    nextButton.disabled = true;
});

// Countdown and Welcome Screen
function startCountdown() {
    let countdownValue = 3;
    const countdownElement = document.getElementById("countdown");
    const interval = setInterval(() => {
        countdownElement.textContent = countdownValue;
        countdownValue--;
        if (countdownValue < 0) {
            clearInterval(interval);
            startQuiz();
        }
    }, 1000);
}

function startQuiz() {
    document.getElementById("welcome-screen").classList.add("hidden");
    document.getElementById("quiz-container").classList.remove("hidden");
    loadQuestion();
    nextButton.disabled = true;
}

startCountdown();
